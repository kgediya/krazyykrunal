<!DOCTYPE html>
<html>
<head>
  <title>360 Portal Generator</title>
  <style>
    /* Add your custom CSS styling here */
    @font-face {
      font-family: 'PF Tempesta Five';
      font-style: normal;
      font-weight: 400;
      src: local('PF Tempesta Five'), url('.././assets/pf_tempesta_five.woff') format('woff');
    }

    body {
      font-family: 'PF Tempesta Five', Arial, sans-serif;
      margin: 0;
      padding: 20px;
    }

    h1 {
      text-align: center;
    }

    #upload-container {
      text-align: center;
      margin-bottom: 20px;
    }

    #image-upload {
      display: none;
    }

    #image-preview {
      max-width: 400px;
      max-height: 400px;
      margin: 0 auto;
      border: 1px solid #ddd;
      border-radius: 4px;
      overflow: hidden;
    }

    #image-preview img {
      display: block;
      max-width: 100%;
      max-height: 100%;
    }

    #result {
      text-align: center;
    }

    #split-button {
      padding: 10px 20px;
      font-size: 16px;
      font-family: 'PF Tempesta Five', Arial, sans-serif;
      background-color: #000000;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      transition: background-color 0.3s;
    }

    #split-button:disabled {
      background-color: #ccc;
      cursor: not-allowed;
    }

    #download-button {
      display: none;
      padding: 10px 20px;
      font-size: 16px;
      background-color: #00ba3b;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      text-decoration: none;
      transition: background-color 0.3s;
    }

    #download-button:hover {
      background-color: #005e12;
    }
#download-portal-button {
      display: none;
      padding: 10px 20px;
      font-size: 16px;
      background-color: #008CBA;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      text-decoration: none;
      transition: background-color 0.3s;
    }

    #download-portal-button:hover {
      background-color: #005580;
    }
    #loading-bar-container {
      width: 100%;
      height: 20px;
      background-color: #f1f1f1;
      border-radius: 4px;
      overflow: hidden;
      margin-top: 10px;
    }

    #loading-bar {
      height: 100%;
      width: 0;
      background-color: #4caf50;
      transition: width 0.3s;
    }

    .hidden {
      display: none;
    }
  </style>
</head>
<body>
  <h1>360 Portal Generator</h1>

  <div id="upload-container">
    <label for="image-upload" id="upload-label">
      <strong>Choose a 360 Panorama image</strong>
    </label>
    <input type="file" id="image-upload" accept="image/*" />
    <div id="image-preview"></div>
  </div>

  <div id="result">
    <button id="split-button" disabled>Split Image</button>
    <div id="loading-bar-container" class="hidden">
      <div id="loading-bar"></div>
    </div>
    <a id="download-button" download="split_images.zip">Download Images</a><br><br>
    <a id="download-portal-button" download="portal-sphere.gltf">Download Sphere</a>
  </div>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.7.1/jszip.min.js"></script>
  <!-- Include Inflate library -->
 
  <script type="module">
  const _0x33e37d=_0x3c8e;function _0x3c8e(_0x34f40e,_0x24b0fb){const _0x4d501d=_0x4d50();return _0x3c8e=function(_0x3c8ebd,_0x42a4d3){_0x3c8ebd=_0x3c8ebd-0x13c;let _0x3c3d0c=_0x4d501d[_0x3c8ebd];return _0x3c3d0c;},_0x3c8e(_0x34f40e,_0x24b0fb);}(function(_0x41ddcb,_0x548a19){const _0x30a81f=_0x3c8e,_0x41e7ce=_0x41ddcb();while(!![]){try{const _0x1ce1f3=parseInt(_0x30a81f(0x14e))/0x1*(-parseInt(_0x30a81f(0x190))/0x2)+-parseInt(_0x30a81f(0x178))/0x3+parseInt(_0x30a81f(0x14b))/0x4*(-parseInt(_0x30a81f(0x15f))/0x5)+parseInt(_0x30a81f(0x149))/0x6+-parseInt(_0x30a81f(0x179))/0x7+-parseInt(_0x30a81f(0x18e))/0x8+-parseInt(_0x30a81f(0x189))/0x9*(-parseInt(_0x30a81f(0x154))/0xa);if(_0x1ce1f3===_0x548a19)break;else _0x41e7ce['push'](_0x41e7ce['shift']());}catch(_0x1dc38d){_0x41e7ce['push'](_0x41e7ce['shift']());}}}(_0x4d50,0xd59bb));import*as _0x4f98f8 from'https://cdn.skypack.dev/three@0.132.2/build/three.module.js';import{FBXLoader}from'https://cdn.skypack.dev/three@0.132.2/examples/jsm/loaders/FBXLoader.js';import{MTLLoader}from'https://cdn.skypack.dev/three@0.132.2/examples/jsm/loaders/MTLLoader.js';import{OBJLoader}from'https://cdn.skypack.dev/three@0.132.2/examples/jsm/loaders/OBJLoader.js';import{OrbitControls}from'https://cdn.skypack.dev/three@0.132.2/examples/jsm/controls/OrbitControls.js';import{GLTFExporter}from'https://cdn.skypack.dev/three@0.132.2/examples/jsm/exporters/GLTFExporter.js';function _0x4d50(){const _0x1c9a9a=['style','display','images.zip','color_','onload','readAsDataURL','TextureLoader','getObjectByName','img','QQMux','drawImage','click','jnVqz','eYzTH','height','Tbxsq','querySelector','3365028QJWaSk','2664879xaAoxW','material','.././resources/general/sphere.fbx','parse','src','generateAsync','xDqei','Scene','loading-bar-container','pJnOq','match','target','canvas','createObjectURL','inline-block','ZfHVV','873ZtYoaA','zLxio','disabled','resolve','createElement','12017416QeIagF','reject','41188OsAJuc','then','PQouF','\x22\x20alt=\x22Uploaded\x20Image\x22\x20/>','portal.gltf','application/json','loading-bar','innerHTML','download','image-preview','none','Wpliz','getContext','name','DOMContentLoaded','8168040kykTaQ','<img\x20src=\x22','555868McMxuh','stringify','href','38IvMfDb','classList','addEventListener','result','needsUpdate','hqxRH','383260Dpigyz','remove','load','reload','LXSut','image-upload','TWedg','download-portal-button','forEach','hidden','blob','15CgCbQT','KTwGY','change','width','add','split-button','getElementById','files'];_0x4d50=function(){return _0x1c9a9a;};return _0x4d50();}const fbxPath=_0x33e37d(0x17b),materialPrefix=_0x33e37d(0x16a),numMaterials=0x8;var firstRun=!![];document['addEventListener'](_0x33e37d(0x148),function(){const _0x386e47=_0x33e37d,_0x3263d3=document[_0x386e47(0x165)](_0x386e47(0x159)),_0x59e349=document[_0x386e47(0x165)](_0x386e47(0x143)),_0x4adc7d=document[_0x386e47(0x165)](_0x386e47(0x164)),_0x3b780f=document['getElementById']('download-button'),_0x24538b=document[_0x386e47(0x165)](_0x386e47(0x15b)),_0x78e408=document[_0x386e47(0x165)](_0x386e47(0x181)),_0x584d01=document['getElementById'](_0x386e47(0x140)),_0x2f7ddd=new FBXLoader(),_0x3c76a6=new GLTFExporter(),_0x3bc64b=new _0x4f98f8[(_0x386e47(0x180))]();let _0x192465=null;var _0x815c21=0x0;_0x3263d3[_0x386e47(0x150)](_0x386e47(0x161),function(_0x550ee1){const _0x159345=_0x386e47;if(_0x159345(0x145)===_0x159345(0x145)){const _0x5661e2=_0x550ee1[_0x159345(0x184)][_0x159345(0x166)][0x0];if(_0x5661e2&&_0x5661e2['type'][_0x159345(0x183)]('image.*')){if(_0x159345(0x170)!==_0x159345(0x170))_0x1ede3d[_0x159345(0x155)](_0x1dede6);else{const _0x32e97e=new FileReader();_0x32e97e['onload']=function(){const _0x2ff95d=_0x159345,_0x29e260=_0x32e97e[_0x2ff95d(0x151)];_0x59e349[_0x2ff95d(0x141)]='<img\x20src=\x22'+_0x29e260+_0x2ff95d(0x13d),_0x4adc7d['disabled']=![],_0x192465=null,_0x3b780f['style'][_0x2ff95d(0x168)]=_0x2ff95d(0x144),_0x24538b[_0x2ff95d(0x167)][_0x2ff95d(0x168)]='none';},_0x32e97e['readAsDataURL'](_0x5661e2);}}}else _0xd4bd4f[_0x1f619c]=_0x2703dd['charCodeAt'](_0x2dcf81);});const _0x101134=console['log'];_0x4adc7d[_0x386e47(0x150)](_0x386e47(0x172),function(){const _0x2708f=_0x386e47;if(_0x2708f(0x174)===_0x2708f(0x18a))_0x20fffe[_0x2708f(0x15c)](function(_0x4cb996,_0x2dfe31){_0x414f85['remove'](_0x4cb996);});else{if(!firstRun){location[_0x2708f(0x157)]();return;}const _0x50e208=_0x59e349[_0x2708f(0x177)](_0x2708f(0x16f))['src'],_0x563b7a=0x2,_0x5babf1=0x4;_0x4adc7d['disabled']=!![],_0x584d01[_0x2708f(0x167)][_0x2708f(0x162)]='0',_0x78e408['classList'][_0x2708f(0x155)](_0x2708f(0x15d)),_0x3b780f['style'][_0x2708f(0x168)]=_0x2708f(0x144),_0x24538b[_0x2708f(0x167)][_0x2708f(0x168)]=_0x2708f(0x144),_0x1a5cb5(_0x50e208,_0x563b7a,_0x5babf1);}});const _0x42b49b=_0x51e8ef=>{return new Promise((_0x58ad7f,_0x316227)=>{const _0xa0e557=_0x3c8e,_0x42825f=new _0x4f98f8[(_0xa0e557(0x16d))]();_0x42825f[_0xa0e557(0x156)](_0x51e8ef,_0x22bf7a=>{const _0x1e0785=_0xa0e557;_0x1e0785(0x182)==='pJnOq'?(_0x22bf7a[_0x1e0785(0x152)]=!![],_0x58ad7f(_0x22bf7a)):_0x5e4f71(_0x17f6cf);},undefined,_0x1fd580=>{_0x316227(_0x1fd580);});});},_0x3bf77e=async(_0x41c491,_0xffdf1f)=>{const _0x4e14b9=_0x386e47;if(_0x4e14b9(0x13c)==='PQouF')try{_0x59e349[_0x4e14b9(0x141)]=_0x4e14b9(0x14a)+_0x41c491+_0x4e14b9(0x13d);const _0x1bb826=await _0x42b49b(_0x41c491);_0x1bb826[_0x4e14b9(0x147)]='color_'+(_0x815c21+0x1),_0x101134(_0x1bb826);const _0x2a8ee3=new _0x4f98f8['MeshBasicMaterial']();return _0x2a8ee3['name']=_0x4e14b9(0x16a)+(_0x815c21+0x1),_0xffdf1f[_0x4e14b9(0x17a)]=_0x2a8ee3,_0xffdf1f['material']['map']=_0x1bb826,_0xffdf1f[_0x4e14b9(0x17a)][_0x4e14b9(0x152)]=!![],_0x815c21=_0x815c21+0x1,Promise[_0x4e14b9(0x18c)]();}catch(_0x6ce2e3){return Promise[_0x4e14b9(0x18f)](_0x6ce2e3);}else{const _0x9661d3=new _0x58d619([_0x56b731[_0x4e14b9(0x14c)](_0x19d11f)],{'type':'application/json'}),_0x2c6384=_0x386a5f[_0x4e14b9(0x186)](_0x9661d3);_0x12ea53[_0x4e14b9(0x17e)]({'type':_0x4e14b9(0x15e)})[_0x4e14b9(0x191)](function(_0x16de6f){const _0x15a191=_0x4e14b9,_0x580df7=_0x44130c[_0x15a191(0x186)](_0x16de6f);_0x9535f3['download']=_0x15a191(0x169),_0x3eb700[_0x15a191(0x14d)]=_0x580df7,_0x1726ee[_0x15a191(0x142)]=_0x15a191(0x13e),_0x4e3981[_0x15a191(0x14d)]=_0x2c6384,_0x4b09ac(),_0x12b774['style'][_0x15a191(0x168)]=_0x15a191(0x187),_0x2a407e[_0x15a191(0x167)][_0x15a191(0x168)]=_0x15a191(0x187),_0x4a26bc[_0x15a191(0x18b)]=![],_0x395a06=![];});}};function _0x1a5cb5(_0x229ef4,_0x2c31f8,_0x597a54){const _0x14ab3e=_0x386e47;if(_0x14ab3e(0x17f)!=='kGyVQ'){const _0x4a8277=document[_0x14ab3e(0x18d)](_0x14ab3e(0x185)),_0x6d70e0=_0x4a8277['getContext']('2d'),_0x4f9b84=new Image();_0x4f9b84[_0x14ab3e(0x17d)]=_0x229ef4,_0x4f9b84[_0x14ab3e(0x16b)]=function(){const _0x23f436=_0x14ab3e;if('hqxRH'===_0x23f436(0x153)){_0x4a8277['width']=_0x4f9b84[_0x23f436(0x162)],_0x4a8277[_0x23f436(0x175)]=_0x4f9b84[_0x23f436(0x175)],_0x6d70e0[_0x23f436(0x171)](_0x4f9b84,0x0,0x0);const _0x435b42=_0x4f9b84[_0x23f436(0x162)]/_0x597a54,_0xedf60d=_0x4f9b84[_0x23f436(0x175)]/_0x2c31f8;if(_0x192465===null)_0x192465=new JSZip();else{if(_0x23f436(0x160)!==_0x23f436(0x160)){const _0x49bf5d=_0x5f03c0[_0x23f436(0x151)];_0x586ed6[_0x23f436(0x141)]=_0x23f436(0x14a)+_0x49bf5d+_0x23f436(0x13d),_0x364527[_0x23f436(0x18b)]=![],_0x515537=null,_0x57dd1b[_0x23f436(0x167)][_0x23f436(0x168)]=_0x23f436(0x144),_0x55830d[_0x23f436(0x167)][_0x23f436(0x168)]=_0x23f436(0x144);}else _0x192465[_0x23f436(0x15c)](function(_0x11ddb0,_0x54ec8d){const _0xc5700a=_0x23f436;'OKkOV'!=='OKkOV'?_0x20aa07=new _0x1caa84():_0x192465[_0xc5700a(0x155)](_0x11ddb0);});}let _0x165500=-0x1;const _0x1e838d=_0x2c31f8*_0x597a54;function _0x11ff5c(){const _0x58bd0d=_0x23f436;if(_0x58bd0d(0x188)===_0x58bd0d(0x188)){_0x165500++;const _0x3af02e=_0x165500/_0x1e838d*0x64;_0x584d01['style'][_0x58bd0d(0x162)]=_0x3af02e+'%',_0x101134(_0x165500),_0x165500===_0x1e838d&&(_0x78e408['classList'][_0x58bd0d(0x163)]('hidden'),_0x59e349[_0x58bd0d(0x141)]=_0x58bd0d(0x14a)+_0x229ef4+'\x22\x20alt=\x22Uploaded\x20Image\x22\x20/>');}else _0x50c35c[_0x58bd0d(0x14f)]['add']('hidden'),_0x182c60[_0x58bd0d(0x141)]='<img\x20src=\x22'+_0x21a24b+_0x58bd0d(0x13d);}_0x2f7ddd['load'](fbxPath,async function(_0x4b3606){const _0x2c763f=_0x23f436;for(let _0x27b94c=0x0;_0x27b94c<_0x2c31f8;_0x27b94c++){for(let _0x406d4b=0x0;_0x406d4b<_0x597a54;_0x406d4b++){if(_0x2c763f(0x15a)===_0x2c763f(0x176)){_0x84f313++;const _0x39689b=_0x23349d/_0x1edf7a*0x64;_0x3e547f[_0x2c763f(0x167)][_0x2c763f(0x162)]=_0x39689b+'%',_0x189311(_0x2856b4),_0x5e8477===_0x78bf82&&(_0x3556c4[_0x2c763f(0x14f)][_0x2c763f(0x163)]('hidden'),_0x515395[_0x2c763f(0x141)]=_0x2c763f(0x14a)+_0x11282f+_0x2c763f(0x13d));}else{const _0x3231e4=document[_0x2c763f(0x18d)](_0x2c763f(0x185)),_0x82ef2b=_0x3231e4[_0x2c763f(0x146)]('2d');_0x3231e4[_0x2c763f(0x162)]=_0x435b42,_0x3231e4[_0x2c763f(0x175)]=_0xedf60d,_0x82ef2b[_0x2c763f(0x171)](_0x4a8277,_0x406d4b*_0x435b42,_0x27b94c*_0xedf60d,_0x435b42,_0xedf60d,0x0,0x0,_0x435b42,_0xedf60d);const _0x26e6a4=_0x3231e4['toDataURL']('image/jpeg'),_0x3962a6=_0x26e6a4['replace'](/^data:image\/\w+;base64,/,''),_0x1dc3e1=window['atob'](_0x3962a6),_0xcfd9d=new Uint8Array(_0x1dc3e1['length']),_0x1bb48c=_0x4b3606[_0x2c763f(0x16e)]('color_'+(_0x815c21+0x1));await _0x3bf77e(_0x26e6a4,_0x1bb48c,_0x815c21),_0x101134(_0x815c21);for(let _0x2c98e5=0x0;_0x2c98e5<_0x1dc3e1['length'];_0x2c98e5++){if(_0x2c763f(0x173)===_0x2c763f(0x158)){const _0x3a6194=new _0x36590f();_0x3a6194[_0x2c763f(0x16b)]=function(){const _0x92f35c=_0x2c763f,_0x295632=_0x3a6194[_0x92f35c(0x151)];_0x7bd2ed[_0x92f35c(0x141)]=_0x92f35c(0x14a)+_0x295632+_0x92f35c(0x13d),_0x1fd30e[_0x92f35c(0x18b)]=![],_0x323106=null,_0x67791a[_0x92f35c(0x167)]['display']='none',_0x3e5648[_0x92f35c(0x167)]['display']=_0x92f35c(0x144);},_0x3a6194[_0x2c763f(0x16c)](_0x524996);}else _0xcfd9d[_0x2c98e5]=_0x1dc3e1['charCodeAt'](_0x2c98e5);}_0x192465['file']('color_'+_0x815c21+'.jpg',_0xcfd9d,{'binary':!![]}),_0x11ff5c();}}}_0x3bc64b[_0x2c763f(0x163)](_0x4b3606),_0x101134(_0x4b3606),_0x3c76a6[_0x2c763f(0x17c)](_0x3bc64b,function(_0x58dc3e){const _0x125d50=_0x2c763f,_0x44fea6=new Blob([JSON[_0x125d50(0x14c)](_0x58dc3e)],{'type':_0x125d50(0x13f)}),_0x56360f=URL['createObjectURL'](_0x44fea6);_0x192465[_0x125d50(0x17e)]({'type':'blob'})[_0x125d50(0x191)](function(_0x4c425e){const _0x14b3a1=_0x125d50,_0x19a237=URL[_0x14b3a1(0x186)](_0x4c425e);_0x3b780f[_0x14b3a1(0x142)]=_0x14b3a1(0x169),_0x3b780f[_0x14b3a1(0x14d)]=_0x19a237,_0x24538b['download']=_0x14b3a1(0x13e),_0x24538b['href']=_0x56360f,_0x11ff5c(),_0x3b780f[_0x14b3a1(0x167)]['display']=_0x14b3a1(0x187),_0x24538b[_0x14b3a1(0x167)][_0x14b3a1(0x168)]='inline-block',_0x4adc7d['disabled']=![],firstRun=![];});});});}else return new _0x2030c5((_0x4ae20b,_0x172d5f)=>{const _0x538f38=_0x23f436,_0x62a486=new _0x51afcd['TextureLoader']();_0x62a486[_0x538f38(0x156)](_0x569eac,_0x4e5707=>{const _0x3739dd=_0x538f38;_0x4e5707[_0x3739dd(0x152)]=!![],_0x4ae20b(_0x4e5707);},_0x2297ba,_0x45290a=>{_0x172d5f(_0x45290a);});});};}else{if(!_0x311d7a){_0x3f016a[_0x14ab3e(0x157)]();return;}const _0x5e7116=_0x47153f[_0x14ab3e(0x177)](_0x14ab3e(0x16f))[_0x14ab3e(0x17d)],_0x338e60=0x2,_0x63e8c7=0x4;_0x193ad5[_0x14ab3e(0x18b)]=!![],_0x52118e[_0x14ab3e(0x167)]['width']='0',_0x4b8516[_0x14ab3e(0x14f)][_0x14ab3e(0x155)](_0x14ab3e(0x15d)),_0x3f235a[_0x14ab3e(0x167)][_0x14ab3e(0x168)]=_0x14ab3e(0x144),_0x118f24[_0x14ab3e(0x167)]['display']=_0x14ab3e(0x144),_0x268ab0(_0x5e7116,_0x338e60,_0x63e8c7);}}});
  </script>
</body>
</html>
<!DOCTYPE html>
<html>
<head>
  <title>360 Portal Generator</title>
  <style>
    /* Add your custom CSS styling here */
    @font-face {
      font-family: 'PF Tempesta Five';
      font-style: normal;
      font-weight: 400;
      src: local('PF Tempesta Five'), url('.././assets/pf_tempesta_five.woff') format('woff');
    }

    body {
      font-family: 'PF Tempesta Five', Arial, sans-serif;
      margin: 0;
      padding: 20px;
    }

    h1 {
      text-align: center;
    }

    #upload-container {
      text-align: center;
      margin-bottom: 20px;
    }

    #image-upload {
      display: none;
    }

    #image-preview {
      max-width: 400px;
      max-height: 400px;
      margin: 0 auto;
      border: 1px solid #ddd;
      border-radius: 4px;
      overflow: hidden;
    }

    #image-preview img {
      display: block;
      max-width: 100%;
      max-height: 100%;
    }

    #result {
      text-align: center;
    }

    #split-button {
      padding: 10px 20px;
      font-size: 16px;
      font-family: 'PF Tempesta Five', Arial, sans-serif;
      background-color: #000000;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      transition: background-color 0.3s;
    }

    #split-button:disabled {
      background-color: #ccc;
      cursor: not-allowed;
    }

    #download-button {
      display: none;
      padding: 10px 20px;
      font-size: 16px;
      background-color: #00ba3b;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      text-decoration: none;
      transition: background-color 0.3s;
    }

    #download-button:hover {
      background-color: #005e12;
    }
#download-portal-button {
      display: none;
      padding: 10px 20px;
      font-size: 16px;
      background-color: #008CBA;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      text-decoration: none;
      transition: background-color 0.3s;
    }

    #download-portal-button:hover {
      background-color: #005580;
    }
    #loading-bar-container {
      width: 100%;
      height: 20px;
      background-color: #f1f1f1;
      border-radius: 4px;
      overflow: hidden;
      margin-top: 10px;
    }

    #loading-bar {
      height: 100%;
      width: 0;
      background-color: #4caf50;
      transition: width 0.3s;
    }

    .hidden {
      display: none;
    }
  </style>
</head>
<body>
  <h1>360 Portal Generator</h1>

  <div id="upload-container">
    <label for="image-upload" id="upload-label">
      <strong>Choose a 360 Panorama image</strong>
    </label>
    <input type="file" id="image-upload" accept="image/*" />
    <div id="image-preview"></div>
  </div>

  <div id="result">
    <button id="split-button" disabled>Split Image</button>
    <div id="loading-bar-container" class="hidden">
      <div id="loading-bar"></div>
    </div>
    <a id="download-button" download="split_images.zip">Download Images</a><br><br>
    <a id="download-portal-button" download="portal-sphere.gltf">Download Sphere</a>
  </div>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.7.1/jszip.min.js"></script>
  <!-- Include Inflate library -->
 
  <script type="module">
  const _0x1568a2=_0x5363;function _0x5973(){const _0x5a95e9=['getElementById','material','2112208mAJLSW','LolHQ','hidden','4755525KeAVJN','tfQVc','createObjectURL','innerHTML','QkWmn','CNkJP','log','10453764ZAYFju','remove','474LFCDNh','addEventListener','portal.gltf','inline-block','images.zip','color_','add','split-button','resolve','image/jpeg','canvas','5472VRnPIs','.jpg','href','load','getContext','1405SYcmXX','9468kaqMys','toDataURL','classList','click','GKIvE','style','23696XGpTzn','\x22\x20alt=\x22Uploaded\x20Image\x22\x20/>','onload','download','EgOEv','image-upload','result','ORFpX','MeshBasicMaterial','reject','then','Scene','parse','charCodeAt','file','vAjbe','display','disabled','cyXkm','oLgja','name','DOMContentLoaded','image-preview','img','forEach','src','13WvOdoz','target','height','tFyfn','download-portal-button','NDEeO','needsUpdate','11CNBHVf','createElement','width','24YutYAT','blob','atob','none','drawImage','change','228370LClVph','jaaxf','stringify','application/json','102dAhPhc','querySelector','<img\x20src=\x22'];_0x5973=function(){return _0x5a95e9;};return _0x5973();}function _0x5363(_0x76809,_0x645e32){const _0x597380=_0x5973();return _0x5363=function(_0x5363ad,_0x4816e7){_0x5363ad=_0x5363ad-0x16e;let _0x57e152=_0x597380[_0x5363ad];return _0x57e152;},_0x5363(_0x76809,_0x645e32);}(function(_0x4c1873,_0x5bc9c2){const _0x4f0057=_0x5363,_0x2a563f=_0x4c1873();while(!![]){try{const _0x2769de=-parseInt(_0x4f0057(0x195))/0x1*(-parseInt(_0x4f0057(0x174))/0x2)+parseInt(_0x4f0057(0x185))/0x3*(parseInt(_0x4f0057(0x19c))/0x4)+parseInt(_0x4f0057(0x17c))/0x5+-parseInt(_0x4f0057(0x1c0))/0x6*(parseInt(_0x4f0057(0x179))/0x7)+parseInt(_0x4f0057(0x190))/0x8*(parseInt(_0x4f0057(0x196))/0x9)+-parseInt(_0x4f0057(0x170))/0xa*(-parseInt(_0x4f0057(0x1bd))/0xb)+parseInt(_0x4f0057(0x183))/0xc*(-parseInt(_0x4f0057(0x1b6))/0xd);if(_0x2769de===_0x5bc9c2)break;else _0x2a563f['push'](_0x2a563f['shift']());}catch(_0x2cd34a){_0x2a563f['push'](_0x2a563f['shift']());}}}(_0x5973,0x981ba));import*as _0x1d8b76 from'https://cdn.skypack.dev/three@0.132.2/build/three.module.js';import{FBXLoader}from'https://cdn.skypack.dev/three@0.132.2/examples/jsm/loaders/FBXLoader.js';import{MTLLoader}from'https://cdn.skypack.dev/three@0.132.2/examples/jsm/loaders/MTLLoader.js';import{OBJLoader}from'https://cdn.skypack.dev/three@0.132.2/examples/jsm/loaders/OBJLoader.js';import{OrbitControls}from'https://cdn.skypack.dev/three@0.132.2/examples/jsm/controls/OrbitControls.js';import{GLTFExporter}from'https://cdn.skypack.dev/three@0.132.2/examples/jsm/exporters/GLTFExporter.js';const fbxPath='.././resources/general/sphere.fbx',materialPrefix=_0x1568a2(0x18a),numMaterials=0x8;document['addEventListener'](_0x1568a2(0x1b1),function(){const _0xd42880=_0x1568a2,_0x286c13=document[_0xd42880(0x177)](_0xd42880(0x1a1)),_0x1418bb=document[_0xd42880(0x177)](_0xd42880(0x1b2)),_0x5efb26=document[_0xd42880(0x177)](_0xd42880(0x18c)),_0x125c94=document[_0xd42880(0x177)]('download-button'),_0x5ae795=document['getElementById'](_0xd42880(0x1ba)),_0xa903a0=document[_0xd42880(0x177)]('loading-bar-container'),_0x16d016=document[_0xd42880(0x177)]('loading-bar'),_0x332c4b=new FBXLoader(),_0x491053=new GLTFExporter(),_0x3e3157=new _0x1d8b76[(_0xd42880(0x1a7))]();let _0x30dc39=null;var _0x289baf=0x0;_0x286c13[_0xd42880(0x186)](_0xd42880(0x16f),function(_0x65abab){const _0x3e1012=_0xd42880;if(_0x3e1012(0x181)===_0x3e1012(0x17d))_0x5770c3[_0x3e1012(0x184)](_0x16f56b);else{const _0x47ef9d=_0x65abab[_0x3e1012(0x1b7)]['files'][0x0];if(_0x47ef9d&&_0x47ef9d['type']['match']('image.*')){const _0x4c2e72=new FileReader();_0x4c2e72['onload']=function(){const _0x89a43d=_0x3e1012,_0x36f350=_0x4c2e72[_0x89a43d(0x1a2)];_0x1418bb[_0x89a43d(0x17f)]=_0x89a43d(0x176)+_0x36f350+_0x89a43d(0x19d),_0x5efb26[_0x89a43d(0x1ad)]=![],_0x30dc39=null,_0x125c94['style']['display']='none',_0x5ae795[_0x89a43d(0x19b)][_0x89a43d(0x1ac)]=_0x89a43d(0x1c3);},_0x4c2e72['readAsDataURL'](_0x47ef9d);}}});const _0x44c991=console[_0xd42880(0x182)];_0x5efb26[_0xd42880(0x186)](_0xd42880(0x199),function(){const _0x39d71e=_0xd42880;if(_0x39d71e(0x19a)!==_0x39d71e(0x1b9)){const _0x2ec43f=_0x1418bb[_0x39d71e(0x175)](_0x39d71e(0x1b3))[_0x39d71e(0x1b5)],_0x1bcfb1=0x2,_0x24d170=0x4;_0x5efb26[_0x39d71e(0x1ad)]=!![],_0x16d016[_0x39d71e(0x19b)]['width']='0',_0xa903a0['classList'][_0x39d71e(0x184)](_0x39d71e(0x17b)),_0x125c94[_0x39d71e(0x19b)]['display']=_0x39d71e(0x1c3),_0x5ae795[_0x39d71e(0x19b)][_0x39d71e(0x1ac)]=_0x39d71e(0x1c3),_0x4bfccf(_0x2ec43f,_0x1bcfb1,_0x24d170);}else{const _0x391c37=new _0x4deae5['TextureLoader']();_0x391c37['load'](_0x4cbe42,_0x3c0dc7=>{const _0x5af18c=_0x39d71e;_0x3c0dc7[_0x5af18c(0x1bc)]=!![],_0x45f084(_0x3c0dc7);},_0x3d4680,_0x5b2460=>{_0x2d178c(_0x5b2460);});}});const _0x268736=_0x169a4f=>{const _0x261708=_0xd42880;if(_0x261708(0x1a0)!==_0x261708(0x1a0))_0x4faee3(_0xed1d8d);else return new Promise((_0x3c27d7,_0x5cf142)=>{const _0x2353df=_0x261708;if(_0x2353df(0x1a3)!=='ORFpX')_0x65f88[_0x2353df(0x1b4)](function(_0x3086da,_0x5bc024){const _0x2082c9=_0x2353df;_0x26ad5b[_0x2082c9(0x184)](_0x3086da);});else{const _0x22667b=new _0x1d8b76['TextureLoader']();_0x22667b[_0x2353df(0x193)](_0x169a4f,_0x3a71aa=>{const _0x547888=_0x2353df;_0x547888(0x180)===_0x547888(0x180)?(_0x3a71aa[_0x547888(0x1bc)]=!![],_0x3c27d7(_0x3a71aa)):_0x33d1b9[_0x34289b]=_0x393b63[_0x547888(0x1a9)](_0xc9fcad);},undefined,_0x2bd8e1=>{const _0x12377e=_0x2353df;if('BbGTH'===_0x12377e(0x1ab)){const _0x860777=_0x3d8c5f['querySelector'](_0x12377e(0x1b3))[_0x12377e(0x1b5)],_0x5368c0=0x2,_0x2d2d07=0x4;_0x368026['disabled']=!![],_0x35c2a4[_0x12377e(0x19b)][_0x12377e(0x1bf)]='0',_0x3683c4['classList']['remove']('hidden'),_0x5155be['style']['display']=_0x12377e(0x1c3),_0x18267c[_0x12377e(0x19b)][_0x12377e(0x1ac)]='none',_0x2111a5(_0x860777,_0x5368c0,_0x2d2d07);}else _0x5cf142(_0x2bd8e1);});}});},_0x523ab7=async(_0x4cf21e,_0x13a8ec)=>{const _0x53c896=_0xd42880;if(_0x53c896(0x1af)!=='oLgja'){const _0x3c02b4=_0x4118aa['result'];_0x4d4963[_0x53c896(0x17f)]=_0x53c896(0x176)+_0x3c02b4+'\x22\x20alt=\x22Uploaded\x20Image\x22\x20/>',_0x33eaf9[_0x53c896(0x1ad)]=![],_0x3931ae=null,_0x16dfd1[_0x53c896(0x19b)][_0x53c896(0x1ac)]=_0x53c896(0x1c3),_0x2ee316['style']['display']='none';}else try{if(_0x53c896(0x17a)===_0x53c896(0x17a)){_0x1418bb[_0x53c896(0x17f)]=_0x53c896(0x176)+_0x4cf21e+'\x22\x20alt=\x22Uploaded\x20Image\x22\x20/>';const _0x5e4d4f=await _0x268736(_0x4cf21e);_0x5e4d4f['name']=_0x53c896(0x18a)+(_0x289baf+0x1),_0x44c991(_0x5e4d4f);const _0x22a0d8=new _0x1d8b76[(_0x53c896(0x1a4))]();return _0x22a0d8[_0x53c896(0x1b0)]=_0x53c896(0x18a)+(_0x289baf+0x1),_0x13a8ec[_0x53c896(0x178)]=_0x22a0d8,_0x13a8ec[_0x53c896(0x178)]['map']=_0x5e4d4f,_0x13a8ec['material']['needsUpdate']=!![],_0x289baf=_0x289baf+0x1,Promise[_0x53c896(0x18d)]();}else{const _0x54050b=_0x4d6d83[_0x53c896(0x17e)](_0x280e58);_0x270525[_0x53c896(0x19f)]=_0x53c896(0x189),_0x5814f6[_0x53c896(0x192)]=_0x54050b,_0x4fe82c['download']=_0x53c896(0x187),_0x4885fd[_0x53c896(0x192)]=_0x4d44d1;}}catch(_0x5d34f5){return Promise[_0x53c896(0x1a5)](_0x5d34f5);}};function _0x4bfccf(_0x33c2be,_0x324723,_0x54130b){const _0x274276=_0xd42880,_0x2afd94=document[_0x274276(0x1be)](_0x274276(0x18f)),_0x5da3f4=_0x2afd94[_0x274276(0x194)]('2d'),_0x27d97b=new Image();_0x27d97b[_0x274276(0x1b5)]=_0x33c2be,_0x27d97b[_0x274276(0x19e)]=function(){const _0x2f2143=_0x274276;_0x2afd94[_0x2f2143(0x1bf)]=_0x27d97b[_0x2f2143(0x1bf)],_0x2afd94[_0x2f2143(0x1b8)]=_0x27d97b['height'],_0x5da3f4['drawImage'](_0x27d97b,0x0,0x0);const _0x2893a9=_0x27d97b[_0x2f2143(0x1bf)]/_0x54130b,_0x5cbb9c=_0x27d97b[_0x2f2143(0x1b8)]/_0x324723;_0x30dc39===null?_0x2f2143(0x1ae)!==_0x2f2143(0x1ae)?(_0x576078[_0x2f2143(0x198)][_0x2f2143(0x18b)]('hidden'),_0x3da43c[_0x2f2143(0x19b)][_0x2f2143(0x1ac)]=_0x2f2143(0x188),_0x189059[_0x2f2143(0x19b)]['display']=_0x2f2143(0x188),_0x39fd48[_0x2f2143(0x1ad)]=![],_0x1780b2[_0x2f2143(0x17f)]=_0x2f2143(0x176)+_0x39a6ff+_0x2f2143(0x19d)):_0x30dc39=new JSZip():'NDEeO'===_0x2f2143(0x1bb)?_0x30dc39['forEach'](function(_0x17bad3,_0x1391ac){const _0x3db2f8=_0x2f2143;_0x30dc39[_0x3db2f8(0x184)](_0x17bad3);}):(_0x36bf74['needsUpdate']=!![],_0x2f7568(_0xc60bc8));let _0x45cc05=0x0;const _0x27b19a=_0x324723*_0x54130b;function _0x464341(){const _0x2c0c71=_0x2f2143;_0x45cc05++;const _0x3986a3=_0x45cc05/_0x27b19a*0x64;_0x16d016[_0x2c0c71(0x19b)]['width']=_0x3986a3+'%',_0x45cc05===_0x27b19a&&(_0xa903a0[_0x2c0c71(0x198)][_0x2c0c71(0x18b)]('hidden'),_0x125c94['style']['display']=_0x2c0c71(0x188),_0x5ae795[_0x2c0c71(0x19b)][_0x2c0c71(0x1ac)]='inline-block',_0x5efb26[_0x2c0c71(0x1ad)]=![],_0x1418bb['innerHTML']='<img\x20src=\x22'+_0x33c2be+_0x2c0c71(0x19d));}_0x332c4b['load'](fbxPath,async function(_0x2df8fa){const _0x43be08=_0x2f2143;for(let _0x28d56f=0x0;_0x28d56f<_0x324723;_0x28d56f++){for(let _0x4968e8=0x0;_0x4968e8<_0x54130b;_0x4968e8++){const _0x3eedec=document[_0x43be08(0x1be)](_0x43be08(0x18f)),_0x315069=_0x3eedec['getContext']('2d');_0x3eedec[_0x43be08(0x1bf)]=_0x2893a9,_0x3eedec['height']=_0x5cbb9c,_0x315069[_0x43be08(0x16e)](_0x2afd94,_0x4968e8*_0x2893a9,_0x28d56f*_0x5cbb9c,_0x2893a9,_0x5cbb9c,0x0,0x0,_0x2893a9,_0x5cbb9c);const _0x2727d6=_0x3eedec[_0x43be08(0x197)](_0x43be08(0x18e)),_0x11f3c8=_0x2727d6['replace'](/^data:image\/\w+;base64,/,''),_0x2ec858=window[_0x43be08(0x1c2)](_0x11f3c8),_0x5612e5=new Uint8Array(_0x2ec858['length']),_0x2cc08d=_0x2df8fa['getObjectByName'](_0x43be08(0x18a)+(_0x289baf+0x1));await _0x523ab7(_0x2727d6,_0x2cc08d,_0x289baf),_0x44c991(_0x289baf);for(let _0x1b09a0=0x0;_0x1b09a0<_0x2ec858['length'];_0x1b09a0++){_0x5612e5[_0x1b09a0]=_0x2ec858[_0x43be08(0x1a9)](_0x1b09a0);}_0x30dc39[_0x43be08(0x1aa)](_0x43be08(0x18a)+_0x289baf+_0x43be08(0x191),_0x5612e5,{'binary':!![]}),_0x464341();}}_0x3e3157[_0x43be08(0x18b)](_0x2df8fa),_0x44c991(_0x2df8fa),_0x491053[_0x43be08(0x1a8)](_0x3e3157,function(_0x3e86aa){const _0x455976=_0x43be08;if(_0x455976(0x171)===_0x455976(0x171)){const _0x48352c=new Blob([JSON['stringify'](_0x3e86aa)],{'type':'application/json'}),_0x327922=URL['createObjectURL'](_0x48352c);_0x30dc39['generateAsync']({'type':'blob'})[_0x455976(0x1a6)](function(_0xba71de){const _0x5ad432=_0x455976,_0xad5ecc=URL[_0x5ad432(0x17e)](_0xba71de);_0x125c94[_0x5ad432(0x19f)]=_0x5ad432(0x189),_0x125c94[_0x5ad432(0x192)]=_0xad5ecc,_0x5ae795[_0x5ad432(0x19f)]=_0x5ad432(0x187),_0x5ae795[_0x5ad432(0x192)]=_0x327922;});}else{const _0x1a3b15=new _0x5c4a30([_0x24ff3e[_0x455976(0x172)](_0xa1d6a3)],{'type':_0x455976(0x173)}),_0x243d7c=_0xf17e6b['createObjectURL'](_0x1a3b15);_0x3003d0['generateAsync']({'type':_0x455976(0x1c1)})['then'](function(_0x1a81ce){const _0x53f9f6=_0x455976,_0x12d52d=_0x4e0ed6[_0x53f9f6(0x17e)](_0x1a81ce);_0x5f246d[_0x53f9f6(0x19f)]=_0x53f9f6(0x189),_0x2ffe64['href']=_0x12d52d,_0x38db32[_0x53f9f6(0x19f)]=_0x53f9f6(0x187),_0x4d9f51['href']=_0x243d7c;});}});});};}});
  </script>
</body>
</html>
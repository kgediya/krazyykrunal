<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">
  <title>Get Your Customized Finalist Photo</title>
  <style>
   body {
  font-family: Arial, sans-serif;
  background: url('./background.png') no-repeat center center; /* Adds the background image */
  background-size: cover; /* Ensures the image covers the entire background */
  margin: 0;
  color: white;
  text-align: center;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  min-height: 100vh;
  overflow: hidden;
}
body,h1, h2, h3, h4, h5, h6 {
    font-family: 'Space Grotesk', sans-serif; /* Apply custom font to headings */
}
h1 {
  margin-bottom: 20px;
  font-size: 2rem;
}

.container {
  background: white;
  border-radius: 20px;
  padding: 20px;
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
  max-width: 400px;
  display: flex;  /* This enables Flexbox */
  flex-direction: column; /* Stack items vertically */
  align-items: center;
  width: 90%; 
  max-height: 70%; /* Ensure it's responsive */
  text-align: center;
}

.container input,
.container select,
.container button {
  margin-bottom: 15px;
  display: block;
  width: 90%;
  padding: 10px;
  
  border: dashed 1px #000000;
  text-align: center;
  border-radius: 20px;
  font-size: 1rem;
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
  outline: none;
  transition: 0.3s;
}

.container input:hover,
.container select:hover,
.container button:hover {
  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
}

.container button {
    width: 100%;
  background: linear-gradient(135deg, #6a11cb, #2575fc);
  color: white;
  cursor: pointer;
  font-weight: bold;
}

.container button:disabled {
  background: #ccc;
  cursor: not-allowed;
}

/* Custom styling for the file input */
.file-input-wrapper {
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: center;
  border-radius: 20px;
}

.file-input-wrapper input[type="file"] {
  opacity: 0; /* Hide default file input */
  position: absolute;
  z-index: 1; /* Ensure it's above other elements */
  top: 0;
  left: 0;
  width: 100%; /* Ensure file input takes full width */
  height: 100%; /* Ensure file input takes full height */
  cursor: pointer;
  border-radius: 20px;
}

.choose-file-button {
  padding: 1% 0; /* Vertically expand the button */
  background: linear-gradient(135deg, #6a11cb, #2575fc);
  color: white;
  border-radius: 20px; /* Keep rounded corners */
  text-align: center;
  font-weight: bold;
  text-transform: uppercase;
  cursor: pointer;
  width: 100%; /* Makes the button take up full width of the container */
  font-size: 1.2rem; /* Increases font size */
  transition: 0.3s;
  position: relative;
  z-index: 0;
  display: flex; /* Use flexbox to center the text */
  justify-content: center; /* Horizontally center the text */
  align-items: center; /* Vertically center the text */
  box-sizing: border-box; /* Make sure padding is within the border-radius */
}

.choose-file-button:hover {
  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
}

/* Centering the input fields */
.container input#nameInput {
  text-align: center; /* Center-align the name input */
}

.preview {
  position: relative;
  margin: auto;
  width: 300px;
  height: 375px;
  border-radius: 20px;
  overflow: hidden;
  background: #f3f3f3;
  display: none;
  align-items: center;
  justify-content: center;
  opacity: 0;
  transition: opacity 1s ease-in-out;
}

.preview img {
  max-width: 100%;
  max-height: 100%;
}

.frame {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
}

/* Responsive styling */
@media (max-width: 600px) {
  h1 {
    font-size: 1.5rem; /* Reduce font size for mobile screens */
  }

  .container {
    max-width: 80%;
    max-height: 90%; /* Make container width responsive */
    padding: 10px; /* Reduce padding on mobile */
  }

  .choose-file-button {
    font-size: 1rem; /* Make button font size smaller */
    padding: 2% 0; /* Adjust padding for mobile */
  }

  .preview {
    width: 250px;
    height: 312.5px; /* Adjust preview size */
  }

  .container input,
  .container select,
  .container button {
    padding-top: 10px;
    padding-bottom: 10px; /* Adjust input/button padding */
    font-size: 0.9rem; /* Adjust font size */
  }
}
  </style>
</head>

<body>
  <h1>Get Your Customized <br> XR Creator Hackathon 
  Phase 3 <br> Finalist Photo Here</h1>
  <div class="container">
    
    <label for="nameInput">Enter Your Name</label>
    <input type="text" id="nameInput" placeholder="Input Your Name"  style="text-transform: uppercase;">
     
    <label for="teamSelect">Select Your Team</label>
    <select id="teamSelect"  style="text-transform: uppercase;">
      <option value="Rizzlers">Rizzlers</option>
      <option value="Spambots">Spambots</option>
      <option value="Team Procrastinators">Team Procrastinators</option>
      <option value="neAR">neAR</option>
      <option value="XR Ratios">XR Ratios</option>
      <option value="Virtual Vortex">Virtual Vortex</option>
      <option value="TEAM GRACE">TEAM GRACE</option>
      <option value="Team Silhouette">Team Silhouette</option>
      <option value="Emo">Emo</option>
      <option value="Numerati">Numerati</option>
      <option value="Brahmaand">Brahmaand</option>
      <option value="ELECTRO">ELECTRO</option>
      <option value="XR Runners">XR Runners</option>
      <option value="TEAM TKKL">TEAM TKKL</option>
      <option value="TEAM ItJustWorks">TEAM ItJustWorks</option>
      <option value="VRForge">VRForge</option>
      <option value="Silicon">Silicon</option>
      <option value="XRT">XRT</option>
      <option value="PaintARs">PaintARs</option>
      <option value="XR-Force">XR-Force</option>
      <option value="Concept Flow(Learn LiAIsons)">Concept Flow (Learn LiAIsons)</option>
      <option value="VisionXR">VisionXR</option>
      <option value="Sutli Bumb">Sutli Bumb</option>
      <option value="VISION">VISION</option>
      <option value="PosePerfect">PosePerfect</option>
      <option value="Nectar">Nectar</option>
      <option value="Cognihab">Cognihab</option>
      <option value="V.ARISE">V.ARISE</option>
      <option value="Neuro-Crew">Neuro-Crew</option>
      <option value="XR Titans">XR Titans</option>
      <option value="Bifocal">Bifocal</option>
      <option value="Tech Iera">Tech Iera</option>
      <option value="MindSpaceXR">MindSpaceXR</option>
      <option value="DesiVRse">DesiVRse</option>
      <option value="DharohAR">DharohAR</option>
      <option value="VRKSHETRA">VRKSHETRA</option>
      <option value="INSEMBLE">INSEMBLE</option>
      <option value="HyperKin">HyperKin</option>
      <option value="LumeXR">LumeXR</option>
    </select>
    <p style="color: #000000; text-transform: uppercase;">1:1 Ratio Recommended</p>
    <label for="fileInput">Upload Your Photo</label>
    <div class="file-input-wrapper">
      <input type="file" id="fileInput" accept="image/*">
      <span class="choose-file-button">Upload Your Image</span>
    </div>
    <br>
    <div class="preview" id="preview">
      <canvas id="canvas" width="300" height="375" style="display: none;" hidden></canvas>
      <img id="frameImage" class="frame" alt="Frame Overlay" style="display: none;" hidden>
    </div>
    <br>
    <button id="generatePreviewBtn" style="text-transform: uppercase;" disabled>Generate Preview</button>
    <button id="downloadBtn"  style="text-transform: uppercase;" disabled>Download</button>
  </div>
  <h1>Feel Free To Tag Us :)</h1>
  <p>#wavelaps #xdg #bharatxr #mib #cic #xrcreatorhackathon #wavesummit</p>
  <script>
    const fileInput = document.getElementById('fileInput');
    const preview = document.getElementById('preview');
    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');
    const generatePreviewBtn = document.getElementById('generatePreviewBtn');
    const downloadBtn = document.getElementById('downloadBtn');
    const frameImage = document.getElementById('frameImage');

    frameImage.src = './Frame.png'; // Replace with your frame PNG URL

    let img = new Image();
    let generatedImage = null;

    let uploadedImage = null; // Variable to store the uploaded image data

fileInput.addEventListener('change', (event) => {
  const file = event.target.files[0];

  if (!file) return;

  const reader = new FileReader();

  reader.onload = (e) => {
    uploadedImage = e.target.result; // Store the image data in a variable
    // Enable the preview button once an image is selected
    generatePreviewBtn.disabled = false;
  };

  reader.readAsDataURL(file);
});

generatePreviewBtn.addEventListener('click', () => {
  if (!uploadedImage) {
    console.error("No image uploaded!");
    return;
  }

  const img = new Image();
  img.src = uploadedImage;

  img.onload = () => {
    const aspectRatio = 1024 / 1024;
    let width, height;

    if (img.width / img.height > aspectRatio) {
      height = img.height;
      width = height * aspectRatio;
    } else {
      width = img.width;
      height = width / aspectRatio;
    }

    canvas.width = 1024;
    canvas.height = 1280;

    // Draw the uploaded image on the canvas
    ctx.drawImage(
      img,
      (img.width - width) / 2,
      (img.height - height) / 2,
      width,
      height,
      0,
      225,
      1024,
      1024
    );

    // Draw the frame
    const overlay = new Image();
    overlay.src = frameImage.src;

    overlay.onload = () => {
      ctx.drawImage(overlay, 0, 0, 1024, 1280);

      // Draw the name and team name
      const name = (document.getElementById('nameInput').value || 'Participant').toUpperCase();
      const team = document.getElementById('teamSelect').value.toUpperCase();

      ctx.font = 'bold 48px Arial';
      ctx.fillStyle = 'white';
      ctx.textAlign = 'center';
      ctx.fillText(name, 512, 1100.4); // User's name

      // Set opacity for team name to 50%
      ctx.fillStyle = 'rgba(255, 255, 255, 0.5)'; // 50% opacity
      ctx.fillText(team, 512, 1155.4);

      // Generate and display the final image
      generatedImage = canvas.toDataURL();
      preview.style.display = 'flex';
      preview.style.backgroundImage = `url(${generatedImage})`;
      preview.style.backgroundSize = 'cover';
      preview.style.backgroundPosition = 'center';
      setTimeout(() => {
        preview.style.opacity = 1;
      }, 10);

      // Enable the download button
      downloadBtn.disabled = false;
    };

    overlay.onerror = () => {
      console.error("Error loading the frame image.");
    };
  };

  img.onerror = () => {
    console.error("Error loading the uploaded image.");
  };
});

    downloadBtn.addEventListener('click', () => {
      const link = document.createElement('a');
      link.download = `Finalist_Image.png`;
      link.href = generatedImage;
      link.click();
    });
  </script>
</body>

</html>
